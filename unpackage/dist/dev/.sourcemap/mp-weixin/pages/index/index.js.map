{"version":3,"sources":["webpack:///E:/项目/HBuilderProjects/社区交友/main.js","webpack:///E:/项目/HBuilderProjects/社区交友/pages/index/index.vue?9556","webpack:///E:/项目/HBuilderProjects/社区交友/pages/index/index.vue?cfc2","webpack:///E:/项目/HBuilderProjects/社区交友/pages/index/index.vue?b385","webpack:///E:/项目/HBuilderProjects/社区交友/pages/index/index.vue?b348","webpack:///E:/项目/HBuilderProjects/社区交友/pages/index/index.vue"],"names":["createPage","Page","components","commonList","loadMore","data","scrollH","scrollInto","tabIndex","tabBars","newsList","onNavigationBarSearchInputClicked","uni","navigateTo","url","onNavigationBarButtonTap","onLoad","getSystemInfo","success","res","windowHeight","upx2px","$on","getData","e","console","log","type","follow","user_id","doSupport","id","count","forEach","tab","list","item","comment_count","onUnload","$off","methods","$H","get","then","arr","i","length","push","loadmore","page","firstLoad","getList","index","isrefresh","token","noCheck","map","v","$U","formatCommonList","catch","err","onChangeTab","changeTab","detail","current","isFollow","showToast","title","support","support_count","unsupport_count","msg"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AAC0K;AAC1K,gBAAgB,mLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACzCf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwnB,CAAgB,6oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkD7nB;AACdC,YAAU,EAAE;AACXC,cAAU,EAAVA,UADW;AAEXC,YAAQ,EAARA,QAFW,EADE;;AAKdC,MALc,kBAKP;AACN,WAAO;AACN;AACAC,aAAO,EAAC,GAFF;AAGN;AACAC,gBAAU,EAAC,EAJL;AAKNC,cAAQ,EAAC,CALH;AAMNC,aAAO,EAAE,EANH;AAONC,cAAQ,EAAC,EAPH,EAAP;;AASA,GAfa;AAgBd;AACAC,mCAjBc,+CAiBsB;AACnCC,OAAG,CAACC,UAAJ,CAAe;AACdC,SAAG,EAAE,4BADS,EAAf;;AAGA,GArBa;AAsBd;AACAC,0BAvBc,sCAuBa;AAC1B,SAAKF,UAAL,CAAgB;AACfC,SAAG,EAAE,wBADU,EAAhB;;AAGA,GA3Ba;AA4BdE,QA5Bc,oBA4BL;AACRJ,OAAG,CAACK,aAAJ,CAAkB;AACjBC,aAAO,EAAC,iBAAAC,GAAG,EAAE;AACZ,aAAI,CAACb,OAAL,GAAea,GAAG,CAACC,YAAJ,GAAmBR,GAAG,CAACS,MAAJ,CAAW,GAAX,CAAlC;AACA,OAHgB,EAAlB;;AAKA;AACAT,OAAG,CAACU,GAAJ,CAAQ,aAAR,EAAsB,YAAI;AACzB,WAAI,CAACC,OAAL;AACA,KAFD;AAGA;AACA,SAAKA,OAAL;AACA;AACAX,OAAG,CAACU,GAAJ,CAAQ,uBAAR,EAAgC,UAACE,CAAD,EAAK;AACpCC,aAAO,CAACC,GAAR,CAAY,MAAZ;AACA,cAAQF,CAAC,CAACG,IAAV;AACC,aAAK,QAAL,EAAe;AACf,eAAI,CAACC,MAAL,CAAYJ,CAAC,CAACnB,IAAF,CAAOwB,OAAnB;AACC;AACD,aAAK,SAAL,EAAgB;AAChB,eAAI,CAACC,SAAL,CAAeN,CAAC,CAACnB,IAAjB;AACC,gBANF;;AAQA,KAVD;AAWA;AACAO,OAAG,CAACU,GAAJ,CAAQ,qBAAR,EAA8B,gBAAc,KAAZS,EAAY,QAAZA,EAAY,CAATC,KAAS,QAATA,KAAS;AAC3C,WAAI,CAACtB,QAAL,CAAcuB,OAAd,CAAsB,UAAAC,GAAG,EAAE;AAC1BA,WAAG,CAACC,IAAJ,CAASF,OAAT,CAAiB,UAACG,IAAD,EAAQ;AACxB,cAAGA,IAAI,CAACL,EAAL,KAAYA,EAAf,EAAkB;AACjBK,gBAAI,CAACC,aAAL,GAAqBL,KAArB;AACA;AACD,SAJD;AAKA,OAND;AAOA,KARD;AASA,GA9Da;AA+DdM,UA/Dc,sBA+DH;AACV1B,OAAG,CAAC2B,IAAJ,CAAS,uBAAT,EAAiC,UAACf,CAAD,EAAK,CAAE,CAAxC;AACAZ,OAAG,CAAC2B,IAAJ,CAAS,aAAT,EAAuB,UAACf,CAAD,EAAK,CAAE,CAA9B;AACAZ,OAAG,CAAC2B,IAAJ,CAAS,qBAAT,EAA+B,UAACf,CAAD,EAAK,CAAE,CAAtC;AACA,GAnEa;AAoEdgB,SAAO,EAAE;AACR;AACAjB,WAFQ,qBAEC;AACR;AACA,WAAKkB,EAAL,CAAQC,GAAR,CAAY,YAAZ,EAA0BC,IAA1B,CAA+B,UAAAxB,GAAG,EAAE;AACnC,cAAI,CAACV,OAAL,GAAeU,GAAG,CAACgB,IAAnB;AACA;AACA,YAAIS,GAAG,GAAG,EAAV;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,MAAI,CAACpC,OAAL,CAAaqC,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC7C;AACAD,aAAG,CAACG,IAAJ,CAAS;AACR;AACAC,oBAAQ,EAAC,QAFD;AAGRb,gBAAI,EAAC,EAHG;AAIRc,gBAAI,EAAC,CAJG;AAKRC,qBAAS,EAAC,KALF,EAAT;;AAOA;AACD,cAAI,CAACxC,QAAL,GAAgBkC,GAAhB;AACA;AACA,YAAI,MAAI,CAACnC,OAAL,CAAaqC,MAAjB,EAAyB;AACxB,gBAAI,CAACK,OAAL;AACA;AACD,OAnBD;;AAqBA,KAzBO;AA0BR;AACAA,WA3BQ,qBA2BC;AACR,UAAIC,KAAK,GAAG,KAAK5C,QAAjB;AACA,UAAIuB,EAAE,GAAG,KAAKtB,OAAL,CAAa2C,KAAb,EAAoBrB,EAA7B;AACA,UAAIkB,IAAI,GAAG,KAAKvC,QAAL,CAAc0C,KAAd,EAAqBH,IAAhC;AACA,UAAII,SAAS,GAAGJ,IAAI,KAAK,CAAzB;AACA,WAAKR,EAAL,CAAQC,GAAR,CAAY,gBAAcX,EAAd,GAAiB,QAAjB,GAA0BkB,IAAtC,EAA2C,EAA3C,EAA8C;AAC7CK,aAAK,EAAC,IADuC;AAE7CC,eAAO,EAAC,IAFqC,EAA9C;;AAICZ,UAJD,CAIM,UAAAxB,GAAG,EAAE;AACV,YAAIgB,IAAI,GAAGhB,GAAG,CAACgB,IAAJ,CAASqB,GAAT,CAAa,UAAAC,CAAC,EAAE;AAC1B,iBAAO,MAAI,CAACC,EAAL,CAAQC,gBAAR,CAAyBF,CAAzB,CAAP;AACA,SAFU,CAAX;;AAIA,cAAI,CAAC/C,QAAL,CAAc0C,KAAd,EAAqBjB,IAArB,GAA4BkB,SAAS,GAAGlB,IAAH,gCAAc,MAAI,CAACzB,QAAL,CAAc0C,KAAd,EAAqBjB,IAAnC,sBAA2CA,IAA3C,EAArC;;AAEA,cAAI,CAACzB,QAAL,CAAc0C,KAAd,EAAqBJ,QAArB,GAAiCb,IAAI,CAACW,MAAL,GAAc,EAAd,GAAmB,OAAnB,GAA6B,QAA9D;;AAEA,YAAIO,SAAJ,EAAe;AACd,gBAAI,CAAC3C,QAAL,CAAc0C,KAAd,EAAqBF,SAArB,GAAiC,IAAjC;AACA;AACD,OAhBD,EAgBGU,KAhBH,CAgBS,UAAAC,GAAG,EAAE;AACb,YAAG,CAACR,SAAJ,EAAc;AACb,gBAAI,CAAC3C,QAAL,CAAc0C,KAAd,EAAqBH,IAArB;AACA;AACD,OApBD;AAqBA,KArDO;AAsDR;AACAa,eAvDQ,uBAuDItC,CAvDJ,EAuDM;AACb,WAAKuC,SAAL,CAAevC,CAAC,CAACwC,MAAF,CAASC,OAAxB;AACA,KAzDO;AA0DR;AACAF,aA3DQ,qBA2DEX,KA3DF,EA2DQ;AACf,UAAI,KAAK5C,QAAL,KAAkB4C,KAAtB,EAA6B;AAC5B;AACA;AACD,WAAK5C,QAAL,GAAgB4C,KAAhB;AACA;AACA,WAAK7C,UAAL,GAAkB,QAAM6C,KAAxB;AACA;AACA,UAAI,CAAC,KAAK1C,QAAL,CAAc,KAAKF,QAAnB,EAA6B0C,SAAlC,EAA6C;AAC5C,aAAKC,OAAL;AACA;AACD,KAtEO;AAuER;AACAvB,UAxEQ,kBAwEDC,OAxEC,EAwEO;AACd;AACA,WAAKnB,QAAL,CAAcuB,OAAd,CAAsB,UAAAC,GAAG,EAAE;AAC1BA,WAAG,CAACC,IAAJ,CAASF,OAAT,CAAiB,UAACG,IAAD,EAAQ;AACxB,cAAGA,IAAI,CAACP,OAAL,KAAiBA,OAApB,EAA4B;AAC3BO,gBAAI,CAAC8B,QAAL,GAAgB,IAAhB;AACA;AACD,SAJD;AAKA,OAND;AAOAtD,SAAG,CAACuD,SAAJ,CAAc,EAAEC,KAAK,EAAE,MAAT,EAAd;AACA,KAlFO;AAmFR;AACAtC,aApFQ,qBAoFEN,CApFF,EAoFI;AACX;AACA,WAAKd,QAAL,CAAc,KAAKF,QAAnB,EAA6B2B,IAA7B,CAAkCF,OAAlC,CAA0C,UAAAG,IAAI,EAAE;AAC/C,YAAGA,IAAI,CAACL,EAAL,KAAYP,CAAC,CAACO,EAAjB,EAAoB;AACnB;AACA,cAAIK,IAAI,CAACiC,OAAL,CAAa1C,IAAb,KAAsB,EAA1B,EAA8B;AAC7BS,gBAAI,CAACiC,OAAL,CAAa7C,CAAC,CAACG,IAAF,GAAO,QAApB;AACA,WAFD,MAEO,IAAIS,IAAI,CAACiC,OAAL,CAAa1C,IAAb,KAAqB,SAArB,IAAkCH,CAAC,CAACG,IAAF,KAAW,WAAjD,EAA8D;AACpE;AACAS,gBAAI,CAACiC,OAAL,CAAaC,aAAb;AACA;AACAlC,gBAAI,CAACiC,OAAL,CAAaE,eAAb;AACA,WALM,MAKA,IAAGnC,IAAI,CAACiC,OAAL,CAAa1C,IAAb,KAAqB,WAArB,IAAoCH,CAAC,CAACG,IAAF,KAAW,SAAlD,EAA4D,CAAO;AACzE;AACAS,gBAAI,CAACiC,OAAL,CAAaC,aAAb;AACA;AACAlC,gBAAI,CAACiC,OAAL,CAAaE,eAAb;AACA;AACDnC,cAAI,CAACiC,OAAL,CAAa1C,IAAb,GAAoBH,CAAC,CAACG,IAAtB;AACA;AACD,OAlBD;AAmBA,UAAI6C,GAAG,GAAGhD,CAAC,CAACG,IAAF,KAAW,SAAX,GAAuB,GAAvB,GAA6B,GAAvC;AACAf,SAAG,CAACuD,SAAJ,CAAc,EAAEC,KAAK,EAAEI,GAAG,GAAG,IAAf,EAAd;AACA,KA3GO;AA4GR;AACAxB,YA7GQ,oBA6GCI,KA7GD,EA6GO;AACd;AACA,UAAIhB,IAAI,GAAG,KAAK1B,QAAL,CAAc0C,KAAd,CAAX;AACA;AACA,UAAIhB,IAAI,CAACY,QAAL,KAAkB,QAAtB,EAAgC;AAChC;AACAZ,UAAI,CAACY,QAAL,GAAgB,QAAhB;AACA;AACAZ,UAAI,CAACa,IAAL;AACA,WAAKE,OAAL;AACA,KAvHO,EApEK,E","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=cf6c8bfc&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('cf6c8bfc')) {\n      api.createRecord('cf6c8bfc', component.options)\n    } else {\n      api.reload('cf6c8bfc', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=cf6c8bfc&\", function () {\n      api.rerender('cf6c8bfc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/项目/HBuilderProjects/社区交友/pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=cf6c8bfc&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport commonList from '@/components/common/common-list.vue';\nimport loadMore from '@/components/common/loadmore.vue';\nexport default {\n\tcomponents: {\n\t\tcommonList,\n\t\tloadMore\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 列表高度\n\t\t\tscrollH:600,\n\t\t\t// 顶部选项卡\n\t\t\tscrollInto:\"\",\n\t\t\ttabIndex:0,\n\t\t\ttabBars: [],\n\t\t\tnewsList:[]\n\t\t}\n\t},\n\t// 监听点击导航栏搜索框\n\tonNavigationBarSearchInputClicked() {\n\t\tuni.navigateTo({\n\t\t\turl: '../search/search?type=post',\n\t\t})\n\t},\n\t// 监听导航按钮点击事件\n\tonNavigationBarButtonTap() {\n\t\tthis.navigateTo({\n\t\t\turl: '../add-input/add-input',\n\t\t})\n\t},\n\tonLoad() {\n\t\tuni.getSystemInfo({\n\t\t\tsuccess:res=>{\n\t\t\t\tthis.scrollH = res.windowHeight - uni.upx2px(101)\n\t\t\t}\n\t\t})\n\t\t// 监听刷新首页\n\t\tuni.$on('updateIndex',()=>{\n\t\t\tthis.getData()\n\t\t})\n\t\t// 根据选项生成列表\n\t\tthis.getData()\n\t\t// 监听关注和顶踩操作\n\t\tuni.$on('updateFollowOrSupport',(e)=>{\n\t\t\tconsole.log('接收到了');\n\t\t\tswitch (e.type){\n\t\t\t\tcase 'follow': // 关注\n\t\t\t\tthis.follow(e.data.user_id)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'support': // 顶踩\n\t\t\t\tthis.doSupport(e.data)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t})\n\t\t// 监听评论数变化\n\t\tuni.$on('updateCommentsCount',({id,count})=>{\n\t\t\tthis.newsList.forEach(tab=>{\n\t\t\t\ttab.list.forEach((item)=>{\n\t\t\t\t\tif(item.id === id){\n\t\t\t\t\t\titem.comment_count = count\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t},\n\tonUnload() {\n\t\tuni.$off('updateFollowOrSupport',(e)=>{})\n\t\tuni.$off('updateIndex',(e)=>{})\n\t\tuni.$off('updateCommentsCount',(e)=>{})\n\t},\n\tmethods: {\n\t\t// 获取数据\n\t\tgetData(){\n\t\t\t// 获取分类\n\t\t\tthis.$H.get('/postclass').then(res=>{\n\t\t\t\tthis.tabBars = res.list\n\t\t\t\t// 根据分类生成列表\n\t\t\t\tvar arr = []\n\t\t\t\tfor (let i = 0; i < this.tabBars.length; i++) {\n\t\t\t\t\t// 生成列表模板\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\t// 1.上拉加载更多  2.加载中... 3.没有更多了\n\t\t\t\t\t\tloadmore:\"上拉加载更多\",\n\t\t\t\t\t\tlist:[],\n\t\t\t\t\t\tpage:1,\n\t\t\t\t\t\tfirstLoad:false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.newsList = arr\n\t\t\t\t// 获取第一个分类的数据\n\t\t\t\tif (this.tabBars.length) {\n\t\t\t\t\tthis.getList()\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\t\t// 获取指定分类下的列表\n\t\tgetList(){\n\t\t\tlet index = this.tabIndex\n\t\t\tlet id = this.tabBars[index].id\n\t\t\tlet page = this.newsList[index].page\n\t\t\tlet isrefresh = page === 1\n\t\t\tthis.$H.get('/postclass/'+id+'/post/'+page,{},{\n\t\t\t\ttoken:true,\n\t\t\t\tnoCheck:true\n\t\t\t})\n\t\t\t.then(res=>{\n\t\t\t\tlet list = res.list.map(v=>{\n\t\t\t\t\treturn this.$U.formatCommonList(v)\n\t\t\t\t})\n\n\t\t\t\tthis.newsList[index].list = isrefresh ? list : [...this.newsList[index].list,...list];\n\t\t\t\t\n\t\t\t\tthis.newsList[index].loadmore  = list.length < 10 ? '没有更多了' : '上拉加载更多';\n\t\t\t\t\n\t\t\t\tif (isrefresh) {\n\t\t\t\t\tthis.newsList[index].firstLoad = true\n\t\t\t\t}\n\t\t\t}).catch(err=>{\n\t\t\t\tif(!isrefresh){\n\t\t\t\t\tthis.newsList[index].page--;\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 监听滑动\n\t\tonChangeTab(e){\n\t\t\tthis.changeTab(e.detail.current)\n\t\t},\n\t\t// 切换选项\n\t\tchangeTab(index){\n\t\t\tif (this.tabIndex === index) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.tabIndex = index\n\t\t\t// 滚动到指定元素\n\t\t\tthis.scrollInto = 'tab'+index\n\t\t\t// 获取当前分类下的列表数据\n\t\t\tif (!this.newsList[this.tabIndex].firstLoad) {\n\t\t\t\tthis.getList()\n\t\t\t}\n\t\t},\n\t\t// 关注\n\t\tfollow(user_id){\n\t\t\t// 找到当前作者的所有列表\n\t\t\tthis.newsList.forEach(tab=>{\n\t\t\t\ttab.list.forEach((item)=>{\n\t\t\t\t\tif(item.user_id === user_id){\n\t\t\t\t\t\titem.isFollow = true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t\tuni.showToast({ title: '关注成功' })\n\t\t},\n\t\t// 顶踩操作\n\t\tdoSupport(e){\n\t\t\t// 拿到当前的选项卡对应的list\n\t\t\tthis.newsList[this.tabIndex].list.forEach(item=>{\n\t\t\t\tif(item.id === e.id){\n\t\t\t\t\t// 之前没有操作过\n\t\t\t\t\tif (item.support.type === '') {\n\t\t\t\t\t\titem.support[e.type+'_count']++\n\t\t\t\t\t} else if (item.support.type ==='support' && e.type === 'unsupport') {\n\t\t\t\t\t\t// 顶 - 1\n\t\t\t\t\t\titem.support.support_count--;\n\t\t\t\t\t\t// 踩 + 1\n\t\t\t\t\t\titem.support.unsupport_count++;\n\t\t\t\t\t} else if(item.support.type ==='unsupport' && e.type === 'support'){ \t\t\t\t\t// 之前踩了\n\t\t\t\t\t\t// 顶 + 1\n\t\t\t\t\t\titem.support.support_count++;\n\t\t\t\t\t\t// 踩 - 1\n\t\t\t\t\t\titem.support.unsupport_count--;\n\t\t\t\t\t}\n\t\t\t\t\titem.support.type = e.type\n\t\t\t\t}\n\t\t\t})\n\t\t\tlet msg = e.type === 'support' ? '顶' : '踩'\n\t\t\tuni.showToast({ title: msg + '成功' });\n\t\t},\n\t\t// 上拉加载更多\n\t\tloadmore(index){\n\t\t\t// 拿到当前列表\n\t\t\tlet item = this.newsList[index]\n\t\t\t// 判断是否处于可加载状态（上拉加载更多）\n\t\t\tif (item.loadmore !== '上拉加载更多') return;\n\t\t\t// 修改当前列表加载状态\n\t\t\titem.loadmore = '加载中...'\n\t\t\t// 请求数据\n\t\t\titem.page++;\n\t\t\tthis.getList()\n\t\t}\n\t}\n}\n"],"sourceRoot":""}