{"version":3,"sources":["webpack:///E:/项目/HBuilderProjects/社区交友/main.js","webpack:///E:/项目/HBuilderProjects/社区交友/pages/topic-nav/topic-nav.vue?2bef","webpack:///E:/项目/HBuilderProjects/社区交友/pages/topic-nav/topic-nav.vue?9f6b","webpack:///E:/项目/HBuilderProjects/社区交友/pages/topic-nav/topic-nav.vue?b71b","webpack:///E:/项目/HBuilderProjects/社区交友/pages/topic-nav/topic-nav.vue?4df9","webpack:///E:/项目/HBuilderProjects/社区交友/pages/topic-nav/topic-nav.vue"],"names":["createPage","Page","components","topicList","loadMore","data","scrollH","scrollInto","tabIndex","tabBars","newsList","choose","onNavigationBarSearchInputClicked","uni","navigateTo","url","onNavigationBarButtonTap","onLoad","e","getSystemInfo","success","res","windowHeight","upx2px","getData","setNavigationBarTitle","title","methods","$H","get","then","list","arr","i","length","obj","loadmore","page","firstLoad","push","getList","index","id","isrefresh","map","v","cover","titlepic","desc","today_count","todaypost_count","news_count","post_count","catch","err","onChangeTab","changeTab","detail","current","item"],"mappings":"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","file":"pages/topic-nav/topic-nav.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/topic-nav/topic-nav.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./topic-nav.vue?vue&type=template&id=3a997a28&\"\nvar renderjs\nimport script from \"./topic-nav.vue?vue&type=script&lang=js&\"\nexport * from \"./topic-nav.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3a997a28')) {\n      api.createRecord('3a997a28', component.options)\n    } else {\n      api.reload('3a997a28', component.options)\n    }\n    module.hot.accept(\"./topic-nav.vue?vue&type=template&id=3a997a28&\", function () {\n      api.rerender('3a997a28', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/项目/HBuilderProjects/社区交友/pages/topic-nav/topic-nav.vue\"\nexport default component.exports","export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic-nav.vue?vue&type=template&id=3a997a28&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic-nav.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic-nav.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport topicList from '@/components/news/topic-list.vue';\nimport loadMore from '@/components/common/loadmore.vue';\nexport default {\n\tcomponents: {\n\t\ttopicList,\n\t\tloadMore\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 列表高度\n\t\t\tscrollH:600,\n\t\t\t// 顶部选项卡\n\t\t\tscrollInto:\"\",\n\t\t\ttabIndex:0,\n\t\t\ttabBars: [],\n\t\t\tnewsList:[],\n\t\t\tchoose:false\n\t\t}\n\t},\n\t// 监听点击导航栏搜索框\n\tonNavigationBarSearchInputClicked() {\n\t\tuni.navigateTo({\n\t\t\turl: '../search/search',\n\t\t})\n\t},\n\t// 监听导航按钮点击事件\n\tonNavigationBarButtonTap() {\n\t\tuni.navigateTo({\n\t\t\turl: '../add-input/add-input',\n\t\t})\n\t},\n\tonLoad(e) {\n\t\tuni.getSystemInfo({\n\t\t\tsuccess:res=>{\n\t\t\t\tthis.scrollH = res.windowHeight - uni.upx2px(101)\n\t\t\t}\n\t\t})\n\t\t// 根据选项生成列表\n\t\tthis.getData()\n\t\t\n\t\tif(e.choose){\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t\ttitle:'选择话题'\n\t\t\t})\n\t\t\tthis.choose = true\n\t\t}\n\t},\n\tmethods: {\n\t\t// 获取数据\n\t\tgetData(){\n\t\t\t// 获取分类\n\t\t\tthis.$H.get('/topicclass').then(res=>{\n\t\t\t\t// 渲染分类\n\t\t\t\tthis.tabBars = res.list\n\t\t\t\tvar arr = []\n\t\t\t\tfor (let i = 0; i < this.tabBars.length; i++) {\n\t\t\t\t\t// 生成列表模板\n\t\t\t\t\tlet obj = {\n\t\t\t\t\t\t// 1.上拉加载更多  2.加载中... 3.没有更多了\n\t\t\t\t\t\tloadmore:\"上拉加载更多\",\n\t\t\t\t\t\tlist:[],\n\t\t\t\t\t\tpage:1,\n\t\t\t\t\t\tfirstLoad:false\n\t\t\t\t\t}\n\t\t\t\t\tarr.push(obj)\n\t\t\t\t}\n\t\t\t\tthis.newsList = arr\n\t\t\t\t// 获取第一个分类的数据\n\t\t\t\tif (this.tabBars.length) {\n\t\t\t\t\tthis.getList()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 获取指定分类下的列表\n\t\tgetList(){\n\t\t\tlet index = this.tabIndex\n\t\t\tlet id = this.tabBars[index].id\n\t\t\tlet page = this.newsList[index].page\n\t\t\tlet isrefresh = page === 1\n\t\t\tthis.$H.get('/topicclass/'+id+'/topic/'+page)\n\t\t\t.then(res=>{\n\t\t\t\tlet list = res.list.map(v=>{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid:v.id,\n\t\t\t\t\t\tcover:v.titlepic,\n\t\t\t\t\t\ttitle:v.title,\n\t\t\t\t\t\tdesc:v.desc,\n\t\t\t\t\t\ttoday_count:v.todaypost_count,\n\t\t\t\t\t\tnews_count:v.post_count\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\n\t\t\t\tthis.newsList[index].list = isrefresh ? [...list] : [...this.newsList[index].list,...list];\n\t\t\t\t\n\t\t\t\tthis.newsList[index].loadmore  = list.length < 10 ? '没有更多了' : '上拉加载更多';\n\t\t\t\t\n\t\t\t\tif (isrefresh) {\n\t\t\t\t\tthis.newsList[index].firstLoad = true\n\t\t\t\t}\n\t\t\t}).catch(err=>{\n\t\t\t\tif(!isrefresh){\n\t\t\t\t\tthis.newsList[index].page--;\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 监听滑动\n\t\tonChangeTab(e){\n\t\t\tthis.changeTab(e.detail.current)\n\t\t},\n\t\t// 切换选项\n\t\tchangeTab(index){\n\t\t\tif (this.tabIndex === index) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.tabIndex = index\n\t\t\t// 滚动到指定元素\n\t\t\tthis.scrollInto = 'tab'+index\n\t\t\t// 获取当前分类下的列表数据\n\t\t\tif (!this.newsList[this.tabIndex].firstLoad) {\n\t\t\t\tthis.getList()\n\t\t\t}\n\t\t},\n\t\t// 上拉加载更多\n\t\tloadmore(index){\n\t\t\t// 拿到当前列表\n\t\t\tlet item = this.newsList[index]\n\t\t\t// 判断是否处于可加载状态（上拉加载更多）\n\t\t\tif (item.loadmore !== '上拉加载更多') return;\n\t\t\t// 修改当前列表加载状态\n\t\t\titem.loadmore = '加载中...'\n\t\t\t// 请求数据\n\t\t\titem.page++;\n\t\t\tthis.getList()\n\t\t}\n\t}\n}\n"],"sourceRoot":""}