{"version":3,"sources":["webpack:///E:/项目/HBuilderProjects/社区交友/main.js","webpack:///E:/项目/HBuilderProjects/社区交友/pages/detail/detail.vue?751f","webpack:///E:/项目/HBuilderProjects/社区交友/pages/detail/detail.vue?f437","webpack:///E:/项目/HBuilderProjects/社区交友/pages/detail/detail.vue?4863","webpack:///E:/项目/HBuilderProjects/社区交友/pages/detail/detail.vue?8d25","webpack:///E:/项目/HBuilderProjects/社区交友/pages/detail/detail.vue"],"names":["createPage","Page","components","commonList","bottomInput","moreShare","data","info","id","user_id","username","userpic","newstime","isFollow","title","titlepic","support","type","support_count","unsupport_count","comment_count","share_num","content","images","comments","focus","reply_id","onLoad","e","detail","__init","JSON","parse","uni","$on","follow","doSupport","onUnload","$off","computed","imagesList","map","item","url","onNavigationBarButtonTap","$refs","share","open","shareText","href","image","onBackPress","close","methods","setNavigationBarTitle","$H","get","then","res","getComments","doComment","doShare","showToast","icon","msg","preview","index","previewImage","current","urls","submit","showLoading","mask","post","fid","post_id","token","hideLoading","catch","err","__ArrSort","list","length","$emit","count","arr","temp","lev","forFn","i","push","userid","user","time","$T","gettime","create_time","reply","blur"],"mappings":"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","file":"pages/detail/detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/detail/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=24507e3c&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('24507e3c')) {\n      api.createRecord('24507e3c', component.options)\n    } else {\n      api.reload('24507e3c', component.options)\n    }\n    module.hot.accept(\"./detail.vue?vue&type=template&id=24507e3c&\", function () {\n      api.rerender('24507e3c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/项目/HBuilderProjects/社区交友/pages/detail/detail.vue\"\nexport default component.exports","export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=template&id=24507e3c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./detail.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport commonList from '@/components/common/common-list.vue';\nimport bottomInput from '@/components/common/botton-input.vue';\nimport moreShare from '@/components/common/more-share.vue';\nimport $T from '@/common/time.js';\nexport default {\n\tcomponents: {\n\t\tcommonList,\n\t\tbottomInput,\n\t\tmoreShare\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// 当前帖子信息\n\t\t\tinfo:{\n\t\t\t\tid:0,\n\t\t\t\tuser_id:0,\n\t\t\t\tusername:\"昵称\",\n\t\t\t\tuserpic:\"\",\n\t\t\t\tnewstime:0,\n\t\t\t\tisFollow:false,\n\t\t\t\ttitle:\"\",\n\t\t\t\ttitlepic:\"\",\n\t\t\t\tsupport:{\n\t\t\t\t\ttype:\"support\", // 顶\n\t\t\t\t\tsupport_count:0,\n\t\t\t\t\tunsupport_count:0\n\t\t\t\t},\n\t\t\t\tcomment_count:0,\n\t\t\t\tshare_num:0,\n\t\t\t\tcontent:\"\"\n\t\t\t},\n\t\t\timages:[],\n\t\t\tcomments:[],\n\t\t\tfocus:false,\n\t\t\treply_id:0\n\t\t}\n\t},\n\tonLoad(e) {\n\t\t// 初始化\n\t\tif (e.detail) {\n\t\t\tthis.__init(JSON.parse(e.detail))\n\t\t}\n\t\t// 监听关注和顶踩操作\n\t\tuni.$on('updateFollowOrSupport',(e)=>{\n\t\t\tswitch (e.type){\n\t\t\t\tcase 'follow': // 关注\n\t\t\t\tthis.follow(e.data.user_id)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'support': // 顶踩\n\t\t\t\tthis.doSupport(e.data)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t})\n\t},\n\tonUnload() {\n\t\tuni.$off('updateFollowOrSupport',(e)=>{})\n\t},\n\tcomputed: {\n\t\timagesList() {\n\t\t\treturn this.images.map(item=>item.url) \n\t\t}\n\t},\n\tonNavigationBarButtonTap() {\n\t\tthis.$refs.share.open({\n\t\t\ttitle: this.info.title,\n\t\t\tshareText: this.info.title,\n\t\t\thref:\"http://www.dishaxy.com\",\n\t\t\timage: this.info.titlepic\n\t\t})\n\t},\n\tonBackPress() {\n\t\tthis.$refs.share.close()\n\t},\n\tmethods: {\n\t\t__init(data){\n\t\t\t// 修改标题\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t\ttitle:data.title\n\t\t\t})\n\t\t\tthis.info = data\n\t\t\tthis.info.content = ''\n\t\t\t// 请求api\n\t\t\tthis.$H.get('/post/'+this.info.id).then(res=>{\n\t\t\t\tthis.info.content = res.detail.content\n\t\t\t\tthis.images = res.detail.images\n\t\t\t\t//console.log(res);\n\t\t\t})\n\t\t\tthis.getComments()\n\t\t},\n\t\t// 点击评论\n\t\tdoComment(){\n\t\t\t\n\t\t},\n\t\t// 点击分享\n\t\tdoShare(){\n\t\t\t\n\t\t},\n\t\t// 关注\n\t\tfollow(){\n\t\t\tthis.info.isFollow = true\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '关注成功'\n\t\t\t});\n\t\t},\n\t\t// 顶踩操作\n\t\tdoSupport(e){\n\t\t\t// 之前操作过\n\t\t\tif (this.info.support.type === e.type) {\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ttitle: '你已经操作过了',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet msg = e.type === 'support' ? '顶' : '踩'\n\t\t\t// 之前没有操作过\n\t\t\tif (this.info.support.type === '') {\n\t\t\t\tthis.info.support[e.type+'_count']++\n\t\t\t}else if(this.info.support.type === 'support' && e.type === 'unsupport'){\t\t\t\t\n\t\t\t\t// 顶 - 1\n\t\t\t\tthis.info.support.support_count--;\n\t\t\t\t// 踩 + 1\n\t\t\t\tthis.info.support.unsupport_count++;\n\t\t\t}else if(this.info.support.type === 'unsupport' && e.type === 'support'){\t\t\t   \n\t\t\t\t// 顶 + 1\n\t\t\t\tthis.info.support.support_count++;\n\t\t\t\t// 踩 - 1\n\t\t\t\tthis.info.support.unsupport_count--;\n\t\t\t}\n\t\t\tthis.info.support.type = e.type\n\t\t\tuni.showToast({\n\t\t\t\ttitle: msg\n\t\t\t});\n\t\t},\n\t\t// 预览图片\n\t\tpreview(index){\n\t\t\t// 预览图片\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent:index,\n\t\t\t\turls:this.imagesList\n\t\t\t});\n\t\t},\n\t\t// 提交评论\n\t\tsubmit(data){\n\t\t\tif(data === ''){\n\t\t\t\treturn uni.showToast({\n\t\t\t\t\ttitle: '评论不能为空',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '评论中...',\n\t\t\t\tmask: false\n\t\t\t});\n\t\t\tthis.$H.post('/post/comment',{\n\t\t\t\tfid:this.reply_id,\n\t\t\t\tdata:data,\n\t\t\t\tpost_id:this.info.id\n\t\t\t},{\n\t\t\t\ttoken:true\n\t\t\t}).then(res=>{\n\t\t\t\tuni.hideLoading()\n\t\t\t\tthis.getComments()\n\t\t\t}).catch(err=>{\n\t\t\t\tuni.hideLoading()\n\t\t\t})\n\t\t},\n\t\t// 获取评论列表\n\t\tgetComments(){\n\t\t\tthis.$H.get('/post/'+this.info.id+'/comment')\n\t\t\t.then(res=>{\n\t\t\t\tthis.comments = this.__ArrSort(res.list)\n\t\t\t\tthis.info.comment_count = this.comments.length\n\t\t\t\tuni.$emit('updateCommentsCount',{\n\t\t\t\t\tid:this.info.id,\n\t\t\t\t\tcount:this.info.comment_count\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 重新整理评论格式\n\t\t__ArrSort(arr,id = 0){\n\t\t\tvar temp = [],lev=0;\n\t\t\tvar forFn = function(arr, id,lev){\n\t\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\t\tvar item = arr[i];\n\t\t\t\t\tif (item.fid==id) {\n\t\t\t\t\t\titem.lev=lev;\n\t\t\t\t\t\ttemp.push({\n\t\t\t\t\t\t\tid:item.id,\n\t\t\t\t\t\t\tfid:item.fid,\n\t\t\t\t\t\t\tuserid:item.user.id,\n\t\t\t\t\t\t\tuserpic:item.user.userpic,\n\t\t\t\t\t\t\tusername:item.user.username,\n\t\t\t\t\t\t\ttime:$T.gettime(item.create_time),\n\t\t\t\t\t\t\tdata:item.data,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tforFn(arr,item.id,lev+1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tforFn(arr, id,lev);\n\t\t\treturn temp;\n\t\t},\n\t\t// 回复评论\n\t\treply(id){\n\t\t\tthis.reply_id = id\n\t\t\tthis.focus = true\n\t\t},\n\t\t// 输入框失去焦点\n\t\tblur(){\n\t\t\tthis.reply_id = 0\n\t\t\tthis.focus = false\n\t\t}\n\t}\n}\n"],"sourceRoot":""}