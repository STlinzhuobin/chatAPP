{"version":3,"sources":["webpack:///E:/项目/HBuilderProjects/社区交友/main.js","webpack:///E:/项目/HBuilderProjects/社区交友/pages/history/history.vue?6220","webpack:///E:/项目/HBuilderProjects/社区交友/pages/history/history.vue?c236","webpack:///E:/项目/HBuilderProjects/社区交友/pages/history/history.vue?827c","webpack:///E:/项目/HBuilderProjects/社区交友/pages/history/history.vue?b53e","webpack:///E:/项目/HBuilderProjects/社区交友/pages/history/history.vue"],"names":["createPage","Page","components","commonList","noThing","data","list","onLoad","uni","getStorageSync","JSON","parse","$on","e","console","log","type","follow","user_id","doSupport","id","count","forEach","item","comment_count","onUnload","$off","onNavigationBarButtonTap","showModal","content","success","res","confirm","removeStorageSync","methods","isFollow","showToast","title","support","support_count","unsupport_count","msg"],"mappings":"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","file":"pages/history/history.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/history/history.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./history.vue?vue&type=template&id=03043374&\"\nvar renderjs\nimport script from \"./history.vue?vue&type=script&lang=js&\"\nexport * from \"./history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('03043374')) {\n      api.createRecord('03043374', component.options)\n    } else {\n      api.reload('03043374', component.options)\n    }\n    module.hot.accept(\"./history.vue?vue&type=template&id=03043374&\", function () {\n      api.rerender('03043374', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/项目/HBuilderProjects/社区交友/pages/history/history.vue\"\nexport default component.exports","export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./history.vue?vue&type=template&id=03043374&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\IDE\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./history.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n\nimport commonList from '@/components/common/common-list.vue';\nimport noThing from '@/components/common/no-thing.vue';\nexport default {\n\tcomponents:{\n\t\tcommonList,\n\t\tnoThing\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlist:[]\n\t\t}\n\t},\n\tonLoad() {\n\t\t// 取出历史记录\n\t\tlet list = uni.getStorageSync('history')\n\t\tif(list){\n\t\t\tthis.list = JSON.parse(list)\n\t\t}\n\t\t// 监听关注和顶踩操作\n\t\tuni.$on('updateFollowOrSupport',(e)=>{\n\t\t\tconsole.log('接收到了');\n\t\t\tswitch (e.type){\n\t\t\t\tcase 'follow': // 关注\n\t\t\t\tthis.follow(e.data.user_id)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'support': // 顶踩\n\t\t\t\tthis.doSupport(e.data)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t})\n\t\t// 监听评论数变化\n\t\tuni.$on('updateCommentsCount',({id,count})=>{\n\t\t\tthis.list.forEach((item)=>{\n\t\t\t\t\tif(item.id === id){\n\t\t\t\t\t\titem.comment_count = count\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\t\t})\n\t},\n\tonUnload() {\n\t\tuni.$off('updateFollowOrSupport',(e)=>{})\n\t\tuni.$off('updateCommentsCount',(e)=>{})\n\t},\n\tonNavigationBarButtonTap() {\n\t\tuni.showModal({\n\t\t\tcontent:'是否要清空历史记录',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif(res.confirm){\n\t\t\t\t\tuni.removeStorageSync('history')\n\t\t\t\t\tthis.list = []\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\t// 关注\n\t\tfollow(user_id){\n\t\t\t// 找到当前作者的所有列表\n\t\t\tthis.list.forEach((item)=>{\n\t\t\t\t\tif(item.user_id === user_id){\n\t\t\t\t\t\titem.isFollow = true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\tuni.showToast({ title: '关注成功' })\n\t\t},\n\t\t// 顶踩操作\n\t\tdoSupport(e){\n\t\t\t// 拿到当前的选项卡对应的list\n\t\t\tthis.list.forEach(item=>{\n\t\t\t\tif(item.id === e.id){\n\t\t\t\t\t// 之前没有操作过\n\t\t\t\t\tif (item.support.type === '') {\n\t\t\t\t\t\titem.support[e.type+'_count']++\n\t\t\t\t\t} else if (item.support.type ==='support' && e.type === 'unsupport') {\n\t\t\t\t\t\t// 顶 - 1\n\t\t\t\t\t\titem.support.support_count--;\n\t\t\t\t\t\t// 踩 + 1\n\t\t\t\t\t\titem.support.unsupport_count++;\n\t\t\t\t\t} else if(item.support.type ==='unsupport' && e.type === 'support'){ \t\t\t\t\t// 之前踩了\n\t\t\t\t\t\t// 顶 + 1\n\t\t\t\t\t\titem.support.support_count++;\n\t\t\t\t\t\t// 踩 - 1\n\t\t\t\t\t\titem.support.unsupport_count--;\n\t\t\t\t\t}\n\t\t\t\t\titem.support.type = e.type\n\t\t\t\t}\n\t\t\t})\n\t\t\tlet msg = e.type === 'support' ? '顶' : '踩'\n\t\t\tuni.showToast({ title: msg + '成功' });\n\t\t},\n\t}\n}\n"],"sourceRoot":""}